<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Functions and Macros · Dagger.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaParallel.github.io/Dagger.jl/api-dagger/functions/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Dagger.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../task-spawning/">Task Spawning</a></li><li><a class="tocitem" href="../../data-management/">Data Management</a></li><li><a class="tocitem" href="../../darray/">Distributed Arrays</a></li><li><a class="tocitem" href="../../scopes/">Scopes</a></li><li><a class="tocitem" href="../../processors/">Processors</a></li><li><a class="tocitem" href="../../task-queues/">Task Queues</a></li><li><a class="tocitem" href="../../propagation/">Option Propagation</a></li><li><a class="tocitem" href="../../logging/">Logging and Graphing</a></li><li><a class="tocitem" href="../../checkpointing/">Checkpointing</a></li><li><a class="tocitem" href="../../scheduler-visualization/">Scheduler Visualization</a></li><li><a class="tocitem" href="../../benchmarking/">Benchmarking</a></li><li><a class="tocitem" href="../../dynamic/">Dynamic Scheduler Control</a></li><li><a class="tocitem" href="../../scheduler-internals/">Scheduler Internals</a></li><li><span class="tocitem">Dagger API</span><ul><li><a class="tocitem" href="../types/">Types</a></li><li class="is-active"><a class="tocitem" href>Functions and Macros</a><ul class="internal"><li><a class="tocitem" href="#Task-Functions/Macros"><span>Task Functions/Macros</span></a></li><li><a class="tocitem" href="#Task-Options-Functions/Macros"><span>Task Options Functions/Macros</span></a></li><li><a class="tocitem" href="#Data-Management-Functions"><span>Data Management Functions</span></a></li><li><a class="tocitem" href="#Scope-Functions"><span>Scope Functions</span></a></li><li><a class="tocitem" href="#Lazy-Task-Functions"><span>Lazy Task Functions</span></a></li><li><a class="tocitem" href="#Processor-Functions"><span>Processor Functions</span></a></li><li><a class="tocitem" href="#Context-Functions"><span>Context Functions</span></a></li><li><a class="tocitem" href="#Thunk-Execution-Environment-Functions"><span>Thunk Execution Environment Functions</span></a></li></ul></li></ul></li><li><span class="tocitem">TimespanLogging API</span><ul><li><a class="tocitem" href="../../api-timespanlogging/types/">Types</a></li><li><a class="tocitem" href="../../api-timespanlogging/functions/">Functions and Macros</a></li></ul></li><li><span class="tocitem">DaggerWebDash API</span><ul><li><a class="tocitem" href="../../api-daggerwebdash/types/">Types</a></li><li><a class="tocitem" href="../../api-daggerwebdash/functions/">Functions and Macros</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Dagger API</a></li><li class="is-active"><a href>Functions and Macros</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Functions and Macros</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaParallel/Dagger.jl/blob/master/docs/src/api-dagger/functions.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Dagger-Functions"><a class="docs-heading-anchor" href="#Dagger-Functions">Dagger Functions</a><a id="Dagger-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Dagger-Functions" title="Permalink"></a></h1><ul><li><a href="#Base.fetch"><code>Base.fetch</code></a></li><li><a href="#Base.wait"><code>Base.wait</code></a></li><li><a href="#Dagger.Sch.add_thunk!"><code>Dagger.Sch.add_thunk!</code></a></li><li><a href="#Dagger.Sch.exec!"><code>Dagger.Sch.exec!</code></a></li><li><a href="#Dagger.Sch.get_dag_ids"><code>Dagger.Sch.get_dag_ids</code></a></li><li><a href="#Dagger.Sch.halt!"><code>Dagger.Sch.halt!</code></a></li><li><a href="#Dagger.Sch.sch_handle"><code>Dagger.Sch.sch_handle</code></a></li><li><a href="#Dagger.addprocs!"><code>Dagger.addprocs!</code></a></li><li><a href="#Dagger.compute"><code>Dagger.compute</code></a></li><li><a href="#Dagger.constrain"><code>Dagger.constrain</code></a></li><li><a href="#Dagger.default_enabled"><code>Dagger.default_enabled</code></a></li><li><a href="#Dagger.default_option"><code>Dagger.default_option</code></a></li><li><a href="#Dagger.delayed"><code>Dagger.delayed</code></a></li><li><a href="#Dagger.dependents"><code>Dagger.dependents</code></a></li><li><a href="#Dagger.domain"><code>Dagger.domain</code></a></li><li><a href="#Dagger.execute!"><code>Dagger.execute!</code></a></li><li><a href="#Dagger.get_options"><code>Dagger.get_options</code></a></li><li><a href="#Dagger.get_parent"><code>Dagger.get_parent</code></a></li><li><a href="#Dagger.get_processors"><code>Dagger.get_processors</code></a></li><li><a href="#Dagger.get_tls"><code>Dagger.get_tls</code></a></li><li><a href="#Dagger.in_thunk"><code>Dagger.in_thunk</code></a></li><li><a href="#Dagger.iscompatible"><code>Dagger.iscompatible</code></a></li><li><a href="#Dagger.move"><code>Dagger.move</code></a></li><li><a href="#Dagger.noffspring"><code>Dagger.noffspring</code></a></li><li><a href="#Dagger.order"><code>Dagger.order</code></a></li><li><a href="#Dagger.rmprocs!"><code>Dagger.rmprocs!</code></a></li><li><a href="#Dagger.scope"><code>Dagger.scope</code></a></li><li><a href="#Dagger.set_tls!"><code>Dagger.set_tls!</code></a></li><li><a href="#Dagger.shard"><code>Dagger.shard</code></a></li><li><a href="#Dagger.spawn"><code>Dagger.spawn</code></a></li><li><a href="#Dagger.thunk_processor"><code>Dagger.thunk_processor</code></a></li><li><a href="#Dagger.tochunk"><code>Dagger.tochunk</code></a></li><li><a href="#Dagger.treereduce"><code>Dagger.treereduce</code></a></li><li><a href="#Dagger.with_options"><code>Dagger.with_options</code></a></li><li><a href="#Dagger.@option"><code>Dagger.@option</code></a></li><li><a href="#Dagger.@par"><code>Dagger.@par</code></a></li><li><a href="#Dagger.@shard"><code>Dagger.@shard</code></a></li><li><a href="#Dagger.@spawn"><code>Dagger.@spawn</code></a></li></ul><h2 id="Task-Functions/Macros"><a class="docs-heading-anchor" href="#Task-Functions/Macros">Task Functions/Macros</a><a id="Task-Functions/Macros-1"></a><a class="docs-heading-anchor-permalink" href="#Task-Functions/Macros" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.@spawn" href="#Dagger.@spawn"><code>Dagger.@spawn</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@spawn [opts] f(args...) -&gt; Thunk</code></pre><p>Convenience macro like <code>Dagger.@par</code>, but eagerly executed from the moment it&#39;s called (equivalent to <code>spawn</code>).</p><p>See the docs for <code>@par</code> for more information and usage examples.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/thunk.jl#LL338-L345">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.spawn" href="#Dagger.spawn"><code>Dagger.spawn</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">spawn(f, args...; kwargs...) -&gt; EagerThunk</code></pre><p>Spawns a task with <code>f</code> as the function, <code>args</code> as the arguments, and <code>kwargs</code> as the keyword arguments, returning an <code>EagerThunk</code>. Uses a scheduler running in the background to execute code.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/thunk.jl#LL261-L267">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.delayed" href="#Dagger.delayed"><code>Dagger.delayed</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">delayed(f, options=Options())(args...; kwargs...) -&gt; Thunk
delayed(f; options...)(args...; kwargs...) -&gt; Thunk</code></pre><p>Creates a <a href="../types/#Dagger.Thunk"><code>Thunk</code></a> object which can be executed later, which will call <code>f</code> with <code>args</code> and <code>kwargs</code>. <code>options</code> controls various properties of the resulting <code>Thunk</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/thunk.jl#LL166-L173">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.@par" href="#Dagger.@par"><code>Dagger.@par</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@par [opts] f(args...; kwargs...) -&gt; Thunk</code></pre><p>Convenience macro to call <code>Dagger.delayed</code> on <code>f</code> with arguments <code>args</code> and keyword arguments <code>kwargs</code>. May also be called with a series of assignments like so:</p><pre><code class="language-julia hljs">x = @par begin
    a = f(1,2)
    b = g(a,3)
    h(a,b)
end</code></pre><p><code>x</code> will hold the Thunk representing <code>h(a,b)</code>; additionally, <code>a</code> and <code>b</code> will be defined in the same local scope and will be equally accessible for later calls.</p><p>Options to the <code>Thunk</code> can be set as <code>opts</code> with namedtuple syntax, e.g. <code>single=1</code>. Multiple options may be provided, and will be applied to all generated thunks.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/thunk.jl#LL309-L331">source</a></section></article><h2 id="Task-Options-Functions/Macros"><a class="docs-heading-anchor" href="#Task-Options-Functions/Macros">Task Options Functions/Macros</a><a id="Task-Options-Functions/Macros-1"></a><a class="docs-heading-anchor-permalink" href="#Task-Options-Functions/Macros" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.with_options" href="#Dagger.with_options"><code>Dagger.with_options</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">with_options(f, options::NamedTuple) -&gt; Any
with_options(f; options...) -&gt; Any</code></pre><p>Sets one or more options to the given values, executes <code>f()</code>, resets the options to their previous values, and returns the result of <code>f()</code>. This is the recommended way to set options, as it only affects tasks spawned within its scope. Note that setting an option here will propagate its value across Julia or Dagger tasks spawned by <code>f()</code> or its callees (i.e. the options propagate).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/options.jl#LL5-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.get_options" href="#Dagger.get_options"><code>Dagger.get_options</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_options(key::Symbol, default) -&gt; Any
get_options(key::Symbol) -&gt; Any</code></pre><p>Returns the value of the option named <code>key</code>. If <code>option</code> does not have a value set, then an error will be thrown, unless <code>default</code> is set, in which case it will be returned instead of erroring.</p><pre><code class="nohighlight hljs">get_options() -&gt; NamedTuple</code></pre><p>Returns a <code>NamedTuple</code> of all option key-value pairs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/options.jl#LL22-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.@option" href="#Dagger.@option"><code>Dagger.@option</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@option name myfunc(A, B, C) = value</code></pre><p>A convenience macro for defining <a href="#Dagger.default_option"><code>default_option</code></a>. For example:</p><pre><code class="language-julia hljs">Dagger.@option single mylocalfunc(Int) = 1</code></pre><p>The above call will set the <code>single</code> option to <code>1</code> for any Dagger task calling <code>mylocalfunc(Int)</code> with an <code>Int</code> argument.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/options.jl#LL61-L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.default_option" href="#Dagger.default_option"><code>Dagger.default_option</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">default_option(::Val{name}, Tf, Targs...) where name = value</code></pre><p>Defines the default value for option <code>name</code> to <code>value</code> when Dagger is preparing to execute a function with type <code>Tf</code> with the argument types <code>Targs</code>. Users and libraries may override this to set default values for tasks.</p><p>An easier way to define these defaults is with <a href="#Dagger.@option"><code>@option</code></a>.</p><p>Note that the actual task&#39;s argument values are not passed, as it may not always be possible or efficient to gather all Dagger task arguments on one worker.</p><p>This function may be executed within the scheduler, so it should generally be made very cheap to execute. If the function throws an error, the scheduler will use whatever the global default value is for that option instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/options.jl#LL41-L57">source</a></section></article><h2 id="Data-Management-Functions"><a class="docs-heading-anchor" href="#Data-Management-Functions">Data Management Functions</a><a id="Data-Management-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Management-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.tochunk" href="#Dagger.tochunk"><code>Dagger.tochunk</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">tochunk(x, proc::Processor, scope::AbstractScope; device=nothing, kwargs...) -&gt; Chunk</code></pre><p>Create a chunk from data <code>x</code> which resides on <code>proc</code> and which has scope <code>scope</code>.</p><p><code>device</code> specifies a <code>MemPool.StorageDevice</code> (which is itself wrapped in a <code>Chunk</code>) which will be used to manage the reference contained in the <code>Chunk</code> generated by this function. If <code>device</code> is <code>nothing</code> (the default), the data will be inspected to determine if it&#39;s safe to serialize; if so, the default MemPool storage device will be used; if not, then a <code>MemPool.CPURAMDevice</code> will be used.</p><p>All other kwargs are passed directly to <code>MemPool.poolset</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/chunks.jl#LL244-L258">source</a></section></article><div class="admonition is-warning"><header class="admonition-header">Missing docstring.</header><div class="admonition-body"><p>Missing docstring for <code>@mutable</code>. Check Documenter&#39;s build log for details.</p></div></div><article class="docstring"><header><a class="docstring-binding" id="Dagger.@shard" href="#Dagger.@shard"><code>Dagger.@shard</code></a> — <span class="docstring-category">Macro</span></header><section><div><p>Creates a <code>Shard</code>. See <a href="#Dagger.shard"><code>Dagger.shard</code></a> for details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/chunks.jl#LL209">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.shard" href="#Dagger.shard"><code>Dagger.shard</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">shard(f; kwargs...) -&gt; Chunk{Shard}</code></pre><p>Executes <code>f</code> on all workers in <code>workers</code>, wrapping the result in a process-scoped <code>Chunk</code>, and constructs a <code>Chunk{Shard}</code> containing all of these <code>Chunk</code>s on the current worker.</p><p>Keyword arguments:</p><ul><li><code>procs</code> – The list of processors to create pieces on. May be any iterable container of <code>Processor</code>s.</li><li><code>workers</code> – The list of workers to create pieces on. May be any iterable container of <code>Integer</code>s.</li><li><code>per_thread::Bool=false</code> – If <code>true</code>, creates a piece per each thread, rather than a piece per each worker.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/chunks.jl#LL164-L175">source</a></section></article><h2 id="Scope-Functions"><a class="docs-heading-anchor" href="#Scope-Functions">Scope Functions</a><a id="Scope-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Scope-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.scope" href="#Dagger.scope"><code>Dagger.scope</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">scope(scs...) -&gt; AbstractScope
scope(;scs...) -&gt; AbstractScope</code></pre><p>Constructs an <code>AbstractScope</code> from a set of scope specifiers. Each element in <code>scs</code> is a separate specifier; if <code>scs</code> is empty, an empty <code>UnionScope()</code> is produced; if <code>scs</code> has one element, then exactly one specifier is constructed; if <code>scs</code> has more than one element, a <code>UnionScope</code> of the scopes specified by <code>scs</code> is constructed. A variety of specifiers can be passed to construct a scope:</p><ul><li><code>:any</code> - Constructs an <code>AnyScope()</code></li><li><code>:default</code> - Constructs a <code>DefaultScope()</code></li><li><code>(scs...,)</code> - Constructs a <code>UnionScope</code> of scopes, each specified by <code>scs</code></li><li><code>thread=tid</code> or <code>threads=[tids...]</code> - Constructs an <code>ExactScope</code> or <code>UnionScope</code> containing all <code>Dagger.ThreadProc</code>s with thread ID <code>tid</code>/<code>tids</code> across all workers.</li><li><code>worker=wid</code> or <code>workers=[wids...]</code> - Constructs a <code>ProcessScope</code> or <code>UnionScope</code> containing all <code>Dagger.ThreadProc</code>s with worker ID <code>wid</code>/<code>wids</code> across all threads.</li><li><code>thread=tid</code>/<code>threads=tids</code> and <code>worker=wid</code>/<code>workers=wids</code> - Constructs an <code>ExactScope</code>, <code>ProcessScope</code>, or <code>UnionScope</code> containing all <code>Dagger.ThreadProc</code>s with worker ID <code>wid</code>/<code>wids</code> and threads <code>tid</code>/<code>tids</code>.</li></ul><p>Aside from the worker and thread specifiers, it&#39;s possible to add custom specifiers for scoping to other kinds of processors (like GPUs) or providing different ways to specify a scope. Specifier selection is determined by a precedence ordering: by default, all specifiers have precedence <code>0</code>, which can be changed by defining <code>scope_key_precedence(::Val{spec}) = precedence</code> (where <code>spec</code> is the specifier as a <code>Symbol)</code>. The specifier with the highest precedence in a set of specifiers is used to determine the scope by calling <code>to_scope(::Val{spec}, sc::NamedTuple)</code> (where <code>sc</code> is the full set of specifiers), which should be overriden for each custom specifier, and which returns an <code>AbstractScope</code>. For example:</p><pre><code class="language-julia hljs"># Setup a GPU specifier
Dagger.scope_key_precedence(::Val{:gpu}) = 1
Dagger.to_scope(::Val{:gpu}, sc::NamedTuple) = ExactScope(MyGPUDevice(sc.worker, sc.gpu))

# Generate an `ExactScope` for `MyGPUDevice` on worker 2, device 3
Dagger.scope(gpu=3, worker=2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/scopes.jl#LL242-L278">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.constrain" href="#Dagger.constrain"><code>Dagger.constrain</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">constraint(x::AbstractScope, y::AbstractScope) -&gt; ::AbstractScope</code></pre><p>Constructs a scope that is the intersection of scopes <code>x</code> and <code>y</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/scopes.jl#LL145-L149">source</a></section></article><h2 id="Lazy-Task-Functions"><a class="docs-heading-anchor" href="#Lazy-Task-Functions">Lazy Task Functions</a><a id="Lazy-Task-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Lazy-Task-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.domain" href="#Dagger.domain"><code>Dagger.domain</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">domain(x::T)</code></pre><p>Returns metadata about <code>x</code>. This metadata will be in the <code>domain</code> field of a Chunk object when an object of type <code>T</code> is created as the result of evaluating a Thunk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/chunks.jl#LL7-L13">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.compute" href="#Dagger.compute"><code>Dagger.compute</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">compute(ctx::Context, d::Thunk; options=nothing) -&gt; Chunk</code></pre><p>Compute a Thunk - creates the DAG, assigns ranks to nodes for tie breaking and runs the scheduler with the specified options. Returns a Chunk which references the result.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/compute.jl#LL15-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.dependents" href="#Dagger.dependents"><code>Dagger.dependents</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">dependents(node::Thunk) -&gt; Dict{Union{Thunk,Chunk}, Set{Thunk}}</code></pre><p>Find the set of direct dependents for each task.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/compute.jl#LL72-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.noffspring" href="#Dagger.noffspring"><code>Dagger.noffspring</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">noffspring(dpents::Dict{Union{Thunk,Chunk}, Set{Thunk}}) -&gt; Dict{Thunk, Int}</code></pre><p>Recursively find the number of tasks dependent on each task in the DAG. Takes a Dict as returned by <a href="#Dagger.dependents"><code>dependents</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/compute.jl#LL102-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.order" href="#Dagger.order"><code>Dagger.order</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">order(node::Thunk, ndeps) -&gt; Dict{Thunk,Int}</code></pre><p>Given a root node of the DAG, calculates a total order for tie-breaking.</p><ul><li>Root node gets score 1,</li><li>rest of the nodes are explored in DFS fashion but chunks of each node are explored in order of <code>noffspring</code>, i.e. total number of tasks depending on the result of the said node.</li></ul><p>Args:</p><ul><li>node: root node</li><li>ndeps: result of <a href="#Dagger.noffspring"><code>noffspring</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/compute.jl#LL132-L145">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.treereduce" href="#Dagger.treereduce"><code>Dagger.treereduce</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Tree reduce</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/lib/util.jl#LL102-L104">source</a></section></article><h2 id="Processor-Functions"><a class="docs-heading-anchor" href="#Processor-Functions">Processor Functions</a><a id="Processor-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Processor-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.execute!" href="#Dagger.execute!"><code>Dagger.execute!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">execute!(proc::Processor, f, args...; kwargs...) -&gt; Any</code></pre><p>Executes the function <code>f</code> with arguments <code>args</code> and keyword arguments <code>kwargs</code> on processor <code>proc</code>. This function can be overloaded by <code>Processor</code> subtypes to allow executing function calls differently than normal Julia.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL33-L39">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.iscompatible" href="#Dagger.iscompatible"><code>Dagger.iscompatible</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">iscompatible(proc::Processor, opts, f, Targs...) -&gt; Bool</code></pre><p>Indicates whether <code>proc</code> can execute <code>f</code> over <code>Targs</code> given <code>opts</code>. <code>Processor</code> subtypes should overload this function to return <code>true</code> if and only if it is essentially guaranteed that <code>f(::Targs...)</code> is supported. Additionally, <code>iscompatible_func</code> and <code>iscompatible_arg</code> can be overriden to determine compatibility of <code>f</code> and <code>Targs</code> individually. The default implementation returns <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL42-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.default_enabled" href="#Dagger.default_enabled"><code>Dagger.default_enabled</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">default_enabled(proc::Processor) -&gt; Bool</code></pre><p>Returns whether processor <code>proc</code> is enabled by default. The default value is <code>false</code>, which is an opt-out of the processor from execution when not specifically requested by the user, and <code>true</code> implies opt-in, which causes the processor to always participate in execution when possible.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL58-L65">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.get_processors" href="#Dagger.get_processors"><code>Dagger.get_processors</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_processors(proc::Processor) -&gt; Set{&lt;:Processor}</code></pre><p>Returns the set of processors contained in <code>proc</code>, if any. <code>Processor</code> subtypes should overload this function if they can contain sub-processors. The default method will return a <code>Set</code> containing <code>proc</code> itself.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL68-L74">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.get_parent" href="#Dagger.get_parent"><code>Dagger.get_parent</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_parent(proc::Processor) -&gt; Processor</code></pre><p>Returns the parent processor for <code>proc</code>. The ultimate parent processor is an <code>OSProc</code>. <code>Processor</code> subtypes should overload this to return their most direct parent.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL77-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.move" href="#Dagger.move"><code>Dagger.move</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">move(from_proc::Processor, to_proc::Processor, x)</code></pre><p>Moves and/or converts <code>x</code> such that it&#39;s available and suitable for usage on the <code>to_proc</code> processor. This function can be overloaded by <code>Processor</code> subtypes to transport arguments and convert them to an appropriate form before being used for exection. Subtypes of <code>Processor</code> wishing to implement efficient data movement should provide implementations where <code>x::Chunk</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL88-L96">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.get_tls" href="#Dagger.get_tls"><code>Dagger.get_tls</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_tls()</code></pre><p>Gets all Dagger TLS variable as a <code>NamedTuple</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL307-L311">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.set_tls!" href="#Dagger.set_tls!"><code>Dagger.set_tls!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_tls!(tls)</code></pre><p>Sets all Dagger TLS variables from the <code>NamedTuple</code> <code>tls</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL319-L323">source</a></section></article><h2 id="Context-Functions"><a class="docs-heading-anchor" href="#Context-Functions">Context Functions</a><a id="Context-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Context-Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="Dagger.addprocs!" href="#Dagger.addprocs!"><code>Dagger.addprocs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">addprocs!(ctx::Context, xs)</code></pre><p>Add new workers <code>xs</code> to <code>ctx</code>.</p><p>Workers will typically be assigned new tasks in the next scheduling iteration if scheduling is ongoing.</p><p>Workers can be either <code>Processor</code>s or the underlying process IDs as <code>Integer</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL251-L260">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.rmprocs!" href="#Dagger.rmprocs!"><code>Dagger.rmprocs!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">rmprocs!(ctx::Context, xs)</code></pre><p>Remove the specified workers <code>xs</code> from <code>ctx</code>.</p><p>Workers will typically finish all their assigned tasks if scheduling is ongoing but will not be assigned new tasks after removal.</p><p>Workers can be either <code>Processor</code>s or the underlying process IDs as <code>Integer</code>s.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL271-L280">source</a></section></article><h2 id="Thunk-Execution-Environment-Functions"><a class="docs-heading-anchor" href="#Thunk-Execution-Environment-Functions">Thunk Execution Environment Functions</a><a id="Thunk-Execution-Environment-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Thunk-Execution-Environment-Functions" title="Permalink"></a></h2><p>These functions are used within the function called by a <code>Thunk</code>.</p><article class="docstring"><header><a class="docstring-binding" id="Dagger.in_thunk" href="#Dagger.in_thunk"><code>Dagger.in_thunk</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">in_thunk()</code></pre><p>Returns <code>true</code> if currently in a <a href="../types/#Dagger.Thunk"><code>Thunk</code></a> process, else <code>false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL300-L304">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.thunk_processor" href="#Dagger.thunk_processor"><code>Dagger.thunk_processor</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">thunk_processor()</code></pre><p>Get the current processor executing the current thunk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/processor.jl#LL293-L297">source</a></section></article><h3 id="Dynamic-Scheduler-Control-Functions"><a class="docs-heading-anchor" href="#Dynamic-Scheduler-Control-Functions">Dynamic Scheduler Control Functions</a><a id="Dynamic-Scheduler-Control-Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Dynamic-Scheduler-Control-Functions" title="Permalink"></a></h3><p>These functions query and control the scheduler remotely.</p><article class="docstring"><header><a class="docstring-binding" id="Dagger.Sch.sch_handle" href="#Dagger.Sch.sch_handle"><code>Dagger.Sch.sch_handle</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Gets the scheduler handle for the currently-executing thunk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL18">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.Sch.add_thunk!" href="#Dagger.Sch.add_thunk!"><code>Dagger.Sch.add_thunk!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Adds a new Thunk to the DAG.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL199">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.fetch" href="#Base.fetch"><code>Base.fetch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Base.fetch(c::DArray)</code></pre><p>If a <code>DArray</code> tree has a <code>Thunk</code> in it, make the whole thing a big thunk.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/array/darray.jl#LL270-L274">source</a></section><section><div><p>Waits on a thunk to complete, and fetches its result.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL120">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.wait" href="#Base.wait"><code>Base.wait</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Waits on a thunk to complete.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL175">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.Sch.exec!" href="#Dagger.Sch.exec!"><code>Dagger.Sch.exec!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Executes an arbitrary function within the scheduler, returning the result.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL102">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.Sch.halt!" href="#Dagger.Sch.halt!"><code>Dagger.Sch.halt!</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Commands the scheduler to halt execution immediately.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL112">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Dagger.Sch.get_dag_ids" href="#Dagger.Sch.get_dag_ids"><code>Dagger.Sch.get_dag_ids</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Returns all Thunks IDs as a Dict, mapping a Thunk to its downstream dependents.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaParallel/Dagger.jl/blob/86edf9f07bc4c227d63bffdb24d144d66ca9f0f4/src/sch/dynamic.jl#LL181">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../types/">« Types</a><a class="docs-footer-nextpage" href="../../api-timespanlogging/types/">Types »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 24 July 2023 16:11">Monday 24 July 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
